(function(t){function e(e){for(var n,o,a=e[0],c=e[1],h=e[2],l=0,d=[];l<a.length;l++)o=a[l],s[o]&&d.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,h||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},r=[];function o(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"8494786c"}[t]+".js"}function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(t){var e=[],i=s[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise(function(e,n){i=s[t]=[e,n]});e.push(i[2]=n);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=o(t),r=function(e){c.onerror=c.onload=null,clearTimeout(h);var i=s[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");o.type=n,o.request=r,i[1](o)}s[t]=void 0}};var h=setTimeout(function(){r({type:"timeout",target:c})},12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],h=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=h;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"007e":function(t,e){},"11ca":function(t,e,i){t.exports=i.p+"img/eraser.e9a8fd01.svg"},"162a":function(t,e,i){"use strict";var n=i("5d40"),s=i.n(n);s.a},"1dfb":function(t,e,i){},"33e2":function(t,e,i){"use strict";var n=i("4be5"),s=i.n(n);s.a},"45f8":function(t,e,i){},"4a4a":function(t,e,i){t.exports=i.p+"img/screenOptimised.35cac8b3.png"},"4be5":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"nav"}},[i("router-link",{attrs:{to:"/"}},[t._v("Annotati")]),i("router-link",{attrs:{to:"/about"}},[t._v("About")]),i("router-link",{attrs:{to:"/rec"}},[t._v("Record")]),i("router-link",{attrs:{to:"/play"}},[t._v("Videos")])],1),i("router-view")],1)},r=[],o=(i("5c0b"),i("2877")),a={},c=Object(o["a"])(a,s,r,!1,null,null,null),h=c.exports,l=i("8c4f"),u=i("bb51"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"recordingSection left"},[i("annotation-canvas",{attrs:{bus:t.bus,recording:t.recording,micActive:t.micActive}})],1),i("div",{staticClass:"recordingSection right"},[i("annotation-tools",{attrs:{recording:t.recording},on:{toggleMic:t.toggleMic,toggleRec:t.toggleRec,colourPick:t.changeColour,clearCanvas:t.clearCanvas,toolSelect:t.toolSelect,brushWidth:t.brushWidth}})],1),!t.recording&&t.initialRecord?i("div",{staticClass:"publishSection"},[i("div",{staticClass:"publishPanel"},[i("h1",[t._v("Publish")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"Video Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),i("br"),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{id:"",name:"",cols:"70",rows:"3",placeholder:"Video Description"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),i("br"),i("button",{staticClass:"tool-button",on:{click:t.save}},[t._v("Publish")]),t.published?i("div",[i("span",[t._v("Accessible at ")]),i("a",{attrs:{href:""}},[t._v("annotatii.com/play/"+t._s(t.publishId))])]):t._e()])]):t._e()])},p=[],v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tool-container"},[i("span",{staticClass:"tool-button",class:{active:"pen"==t.activeTool},on:{click:function(e){return t.toolSelect("pen")}}},[i("object",{ref:"pen",staticClass:"toolImage",attrs:{data:t.penSvg,type:"image/svg+xml"}})]),i("span",{staticClass:"tool-button",class:{active:"highlighter"==t.activeTool},on:{click:function(e){return t.toolSelect("highlighter")}}},[i("object",{ref:"highlighter",staticClass:"toolImage",attrs:{data:t.highlighterSvg,type:"image/svg+xml"}})]),i("span",{staticClass:"tool-button",class:{active:"eraser"==t.activeTool},on:{click:function(e){return t.toolSelect("eraser")}}},[i("object",{staticClass:"toolImage",attrs:{data:t.eraserSvg,type:"image/svg+xml"}})]),i("span",{staticClass:"tool-button",on:{click:function(e){return t.clearCanvas()}}},[t._v("Clear")]),i("span",{staticClass:"tool-button",class:{red:t.recording},on:{click:t.toggleRecording}},[t._v(t._s(t.recording?"Recording":"Record"))]),i("span",{staticClass:"tool-button",class:{blue:t.micActive},on:{click:t.toggleMicrophone}},[t._v(t._s(t.micActive?"Mic On":"Mic Off"))]),i("colour-picker",{on:{colourPick:t.colourPick}}),i("span",{staticClass:"tool-button"},[i("input",{staticClass:"thicknessSlider",attrs:{type:"range",min:"1",max:"30",value:"2"},on:{input:t.brushWidth}})])],1)},g=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"palette"},t._l(t.colours,function(e){return i("span",{staticClass:"colour-swatch",style:{backgroundColor:e},on:{click:function(i){return t.colourPick(e)}}})}),0)},b=[],m={name:"colour-picker",data:function(){return{colours:["#333333","#63BBEE","#92E285","#ef5656","#F09E6F","#DC85E9","#F5CE53","#a07b86"]}},methods:{colourPick:function(t){this.$emit("colourPick",t)}}},y=m,k=(i("e0ba"),Object(o["a"])(y,f,b,!1,null,"363121d5",null)),w=k.exports,T={name:"annotation-tools",components:{ColourPicker:w},data:function(){return{activeTool:"pen",highlighterSvg:i("f731"),penSvg:i("c4cc"),eraserSvg:i("11ca")}},props:["recording","micActive"],methods:{setToolsColour:function(t){this.$refs["pen"].getSVGDocument().getElementById("penEnd").style.fill=t,this.$refs["pen"].getSVGDocument().getElementById("penLine").style.stroke=t,this.$refs["highlighter"].getSVGDocument().getElementById("highlighterEnd").style.fill=t,this.$refs["highlighter"].getSVGDocument().getElementById("highlighterLine").style.stroke=t},colourPick:function(t){this.setToolsColour(t),this.$emit("colourPick",t)},toggleRecording:function(){this.$emit("toggleRec")},toggleMicrophone:function(){this.$emit("toggleMic")},toolSelect:function(t){this.activeTool=t,this.$emit("toolSelect",t)},clearCanvas:function(){this.$emit("clearCanvas")},brushWidth:function(t){this.$refs["pen"].getSVGDocument().getElementById("penLine").style["stroke-width"]=t.target.value/4,this.$refs["highlighter"].getSVGDocument().getElementById("highlighterLine").style["stroke-width"]=t.target.value/4,this.$emit("brushWidth",t.target.value)}}},x=T,C=(i("5c57"),Object(o["a"])(x,v,g,!1,null,"f932813a",null)),S=C.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"player",staticClass:"boardContainer",on:{mouseup:function(e){t.scrubbing=!1},mousemove:t.handleScrub}},[i("canvas",{ref:"board"}),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.recording&&t.initialRecord,expression:"!recording && initialRecord"}]},[void 0!=this.annotationLogic.playback?i("div",{staticClass:"playControls unselectable"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],on:{click:t.playToggle}},[i("svg",{attrs:{id:"i-play",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}},[i("path",{attrs:{d:"M10 2 L10 30 24 16 Z"}})])]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],on:{click:t.playToggle}},[i("svg",{attrs:{id:"i-pause",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}},[i("path",{attrs:{d:"M23 2 L23 30 M9 2 L9 30"}})])]),i("span",{staticClass:"time"},[t._v("\n\t\t\t\t"+t._s(t.humanTime(this.annotationLogic.playback.time).mins)+":"+t._s(t.humanTime(this.annotationLogic.playback.time).secs)+"\n\t\t\t\t/\n\t\t\t\t"+t._s(t.humanTime(this.annotationLogic.playback.lengthTime).mins)+":"+t._s(t.humanTime(this.annotationLogic.playback.lengthTime).secs)+"\n\t\t\t")])]):t._e(),i("audio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"recordedAudio",staticClass:"slider",attrs:{src:"",controls:""}}),i("div",{ref:"scrubber",staticClass:"scrubber",on:{mousedown:function(e){t.scrubbing=!0,t.handleScrub(e)}}},[i("span",{ref:"progress",staticClass:"progress"})]),i("span",{on:{click:t.fullscreen}},[i("svg",{attrs:{id:"i-fullscreen",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"32",height:"32",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}},[i("path",{attrs:{d:"M4 12 L4 4 12 4 M20 4 L28 4 28 12 M4 20 L4 28 12 28 M28 20 L28 28 20 28"}})])])])])},E=[];function L(){return this.recordStore=[],this.recording=!1,this.startTime=0,this.recordingLength=0,this.startRecording=function(){this.recording=!0,this.recordStore=[],this.startTime=(new Date).getTime()},this.eventType={clear:1,down:2,up:3,move:4,brush:5,enter:6,leave:7},this.eventTypes={1:["time"],2:["time"],3:["time"],4:["time","x","y"],5:["time","colour","width","opacity"],6:["time"],7:["time"]},this.maxEventSize=Math.pow(4,64),this.encodeEvent=function(t,...e){if(this.eventTypes[t].length!=e.length)throw"attemped to store event with invalid number of arguments";for(var i=0;i<e.length;i++)if(e[i]>this.maxEventSize)throw`Tried to store data greater than 4 bytes (value ${e[i]}) in event ${t}`;this.recordStore.push(t),this.recordStore.push(...e)},this.record=function(t){if(this.recording)switch(t.time=(new Date).getTime()-this.startTime,this.recordingLength=t.time,t.type){case this.eventType.clear:this.encodeEvent(t.type,t.time);break;case this.eventType.up:this.encodeEvent(t.type,t.time);break;case this.eventType.down:this.encodeEvent(t.type,t.time);break;case this.eventType.move:this.encodeEvent(t.type,t.time,t.coords.x,t.coords.y);break;case this.eventType.brush:this.encodeEvent(t.type,t.time,t.brush.colour,t.brush.thickness,t.brush.opacity);break;case this.eventType.enter:this.encodeEvent(t.type,t.time);break;case this.eventType.leave:this.encodeEvent(t.type,t.time);break;default:console.log(t)}},this.stopRecording=function(){this.recording=!1,this.recordStore.length>0&&(this.recordingLength=this.recordStore[this.recordStore.length-1].time)},this}function $(t){this.canvas=t,this.ctx=this.canvas.getContext("2d",{desynchronized:!0,alpha:!1}),this.currentPos={x:0,y:0},this.previousPos={x:0,y:0},this.down=!1,this.inCanvas=!1,this.brush={thickness:2,colour:"black",opacity:1};var e=new Image;return e.src="bg.png",this.clear=function(){this.ctx.globalAlpha=1,this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="black",this.ctx.lineJoin="round",this.ctx.lineCap="round",this.currentPos={x:0,y:0},this.previousPos={x:0,y:0},this.down=!1,this.inCanvas=!1,this.startedDrawing=!1},this.clear(),this.move=function(t,e){this.previousPos.x=this.currentPos.x,this.previousPos.y=this.currentPos.y,this.currentPos.x=t,this.currentPos.y=e,this.startedDrawing&&(this.startedDrawing=!1,this.ctx.moveTo(t,e)),this.down&&(this.ctx.lineWidth=this.brush.thickness,this.ctx.strokeStyle=this.brush.colour,this.ctx.lineTo(this.currentPos.x,this.currentPos.y))},this.penUp=function(){this.down=!1,this.ctx.stroke()},this.penDown=function(){this.down=!0,this.ctx.beginPath(),this.startedDrawing=!0},this.penEnter=function(){this.inCanvas=!0},this.penLeave=function(){this.inCanvas=!1},this.draw=function(){this.ctx.beginPath(),this.ctx.moveTo(this.previousPos.x,this.previousPos.y),this.ctx.lineTo(this.currentPos.x,this.currentPos.y),this.ctx.stroke()},this.drawPointer=function(){this.inCanvas&&(this.ctx.globalAlpha=1,this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.arc(this.currentPos.x,this.currentPos.y,this.brush.thickness,0,2*Math.PI),this.ctx.stroke())},this.brushLoad=function(){this.ctx.lineWidth=this.brush.thickness,this.ctx.strokeStyle=this.brush.colour,this.ctx.globalAlpha=this.brush.opacity},this}function P(t){return this.activateAudio=function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.handlerFunction(t)})},this.handlerFunction=function(e){this.rec=new MediaRecorder(e),this.rec.ondataavailable=e=>{if(this.audioChunks.push(e.data),"inactive"==this.rec.state){let e=new Blob(this.audioChunks,{type:"audio/mpeg-3"});t.src=URL.createObjectURL(e),t.controls=!0,t.autoplay=!0,this.sendData(e)}}},this.sendData=function(t){},this.startRecordingAudio=function(){this.audioChunks=[],this.rec.start()},this.stopRecordingAudio=function(){void 0!=this.rec&&this.rec.stop()},this}i("bc3a");function R(t,e,i){this.colours={black:0,white:1},this.colourLUT=["black","white","#333333","#63BBEE","#92E285","#ef5656","#F09E6F","#DC85E9","#F5CE53","#a07b86"],this.brush={thickness:2,colour:this.colours.black,opacity:1},this.storedInkColour=this.colours.black,this.inCanvas=!1,this.eventTypes={clear:1,down:2,up:3,moving:4,brush:5,enter:6,leave:7},this.playback={time:0,lengthTime:0,progress:0,playing:!1},this.recordAudio=!1,this.recorder=new L,this.renderer=new $(t),this.audioManager=new P(e),this.canvas=this.renderer.canvas,t.addEventListener("pointermove",function(e){if(!this.recorder.recording)return;const i=t.getBoundingClientRect(),n=e.getCoalescedEvents();n.forEach(e=>{let n={type:this.eventTypes.moving,coords:{x:Math.round((e.clientX-i.left)/t.clientWidth*1920),y:Math.round((e.clientY-i.top)/t.clientHeight*1080)}};this.recorder.record(n),this.playRecord(n)}),e.preventDefault()}.bind(this)),t.addEventListener("touchmove",function(e){if(!this.recorder.recording)return;const i=t.getBoundingClientRect();let n={type:this.eventTypes.moving,coords:{x:Math.round((e.targetTouches[0].clientX-i.left)/t.clientWidth*1920),y:Math.round((e.targetTouches[0].clientY-i.top)/t.clientHeight*1080)}};this.recorder.record(n),this.playRecord(n),e.preventDefault()}.bind(this)),t.addEventListener("touchstart",function(t){let e={type:this.eventTypes.down};this.playRecord(e),this.recorder.record(e),t.preventDefault()}.bind(this)),t.addEventListener("touchend",function(t){let e={type:this.eventTypes.up};this.playRecord(e),this.recorder.record(e),t.preventDefault()}.bind(this)),t.addEventListener("touchcancel",function(t){let e={type:this.eventTypes.up};this.playRecord(e),this.recorder.record(e),t.preventDefault()}.bind(this)),t.addEventListener("pointerdown",function(e){let i={type:this.eventTypes.down};this.playRecord(i),this.recorder.record(i);const n=t.getBoundingClientRect();let s={type:this.eventTypes.moving,coords:{x:Math.round((e.clientX-n.left)/t.clientWidth*1920),y:Math.round((e.clientY-n.top)/t.clientHeight*1080)}};this.recorder.record(s),this.playRecord(s),e.preventDefault()}.bind(this)),t.addEventListener("pointerup",function(t){let e={type:this.eventTypes.up};this.playRecord(e),this.recorder.record(e),t.preventDefault()}.bind(this)),t.addEventListener("mouseout",function(t){let e={type:this.eventTypes.up};this.playRecord(e),this.recorder.record(e),this.recorder.record({type:this.eventTypes.leave}),t.preventDefault()}.bind(this)),t.addEventListener("mouseenter",function(t){let e={type:this.eventTypes.brush,brush:JSON.parse(JSON.stringify(this.brush))};this.playRecord(e),this.recorder.record(e),this.recorder.record({type:this.eventTypes.enter}),t.preventDefault()}.bind(this)),this.brushColour=function(t){this.brush.colour=t,this.storedInkColour=this.brush.colour},this.brushColourWithLookup=function(t){this.brushColour(this.colourLUT.indexOf(t))},this.brushWidth=function(t){this.brush.thickness=t},this.clearCanvas=function(){let t={type:this.eventTypes.clear};this.playRecord(t),this.recorder.record(t)},this.toolSelect=function(t){"eraser"==t&&(this.storedInkColour=this.brush.colour,this.brush.colour=this.colours.white,this.brush.thickness=40,this.brush.opacity=1),"highlighter"==t&&(this.brush.colour=this.storedInkColour,this.brush.thickness=15,this.brush.opacity=.4),"pen"==t&&(this.brush.colour=this.storedInkColour,this.brush.thickness=2,this.brush.opacity=1)},this.takeSnap=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=t.width,e.height=t.height,i.drawImage(t,0,0)},this.recToggle=function(){if(this.recorder.recording)this.playback.lengthTime=this.recorder.recordingLength,this.audioManager.stopRecordingAudio(),this.recorder.stopRecording();else{this.renderer.clear(),this.recorder.startRecording(),this.storedInkColour=this.brush.colour,this.recordAudio&&this.audioManager.startRecordingAudio();let t={type:this.eventTypes.brush,brush:JSON.parse(JSON.stringify(this.brush))};this.recorder.record(JSON.parse(JSON.stringify(t))),this.playRecord(t)}},this.micToggle=function(){this.recordAudio=!this.recordAudio,this.recordAudio&&this.audioManager.activateAudio()},this.playToggle=function(){this.playback.playing=!this.playback.playing,this.playback.playing&&1==this.playback.progress&&(this.playback.time=0)},this.setPlayProgress=function(t){this.playback.time=this.playback.lengthTime*t},this.save=function(t,e){let i={title:t,description:e,lengthTime:this.playback.lengthTime,eventData:this.recorder.recordStore};this.exportVideo(i)},this.exportVideo=new function(t){},this.load=function(t){this.recorder.recordStore=t.eventData,this.playback.lengthTime=t.lengthTime,this.recorder.recordingLength=t.lengthTime,this.playback.time=0,this.recorder.recording=!1},this.renderVideo=function(t,e){this.renderer.clear(),this.playEventRecursive(t,0,e),this.renderer.down&&this.renderer.penUp()};let n=0;this.playEventRecursive=function(t,e,i){switch(t[e]){case this.eventTypes.moving:n=4,this.renderer.move(t[e+2],t[e+3]);break;case this.eventTypes.clear:this.renderer.clear(),n=2;break;case this.eventTypes.up:n=2,this.renderer.penUp();break;case this.eventTypes.down:n=2,this.renderer.penDown();break;case this.eventTypes.brush:{let i={};i.colour=t[e+2],i.thickness=t[e+3],i.opacity=t[e+4],this.renderer.brush=JSON.parse(JSON.stringify(i)),this.renderer.brush.colour=this.colourLUT[i.colour],this.renderer.brushLoad(),n=5;break}case this.eventTypes.enter:this.renderer.penEnter(),n=2;break;case this.eventTypes.leave:this.renderer.penLeave(),n=2;break;default:n=1;break}e<t.length-2&&t[e+1]<i&&this.playEventRecursive(t,e+n,i)}.bind(this),this.playRecord=function(t){t.type==this.eventTypes.moving&&(this.renderer.move(t.coords.x,t.coords.y),this.renderer.down&&this.recorder.recording&&this.renderer.draw()),t.type==this.eventTypes.down&&this.renderer.penDown(),t.type==this.eventTypes.up&&this.renderer.penUp(),t.type==this.eventTypes.brush&&(this.renderer.brush=JSON.parse(JSON.stringify(t.brush)),this.renderer.brush.colour=this.colourLUT[t.brush.colour],this.renderer.brushLoad()),t.type==this.eventTypes.clear&&this.renderer.clear()};var s=Date.now();return this.drawframe=function(){let t=Date.now()-s;s=Date.now(),this.recorder.recording?this.playback.time=0:(this.renderer.clear(),0!=this.recorder.recordStore.length&&(this.renderVideo(this.recorder.recordStore,this.playback.time),this.renderer.drawPointer()),this.playback.playing&&this.playback.time<this.playback.lengthTime&&(this.playback.time+=t),this.playback.time>=this.playback.lengthTime&&(this.playback.time=this.playback.lengthTime,this.playback.playing),this.playback.progress=this.playback.time/this.playback.lengthTime,i.style.width=100*this.playback.progress+"%"),requestAnimationFrame(this.drawframe)}.bind(this),this.drawframe(),this}var D={name:"annotation-canvas",data(){return{initialRecord:!1,playing:!0,playback:{},progress:0,scubbing:!1,annotationLogic:{},canvas:void 0}},props:["bus","recording"],methods:{playToggle:function(){this.annotationLogic.playToggle(),this.playing=!this.playing},handleScrub:function(t){if(this.scrubbing){const e=this.$refs.scrubber.getBoundingClientRect();this.annotationLogic.setPlayProgress((t.clientX-e.left)/this.$refs.scrubber.clientWidth)}},humanTime:function(t){var e=t/1e3,i=(Math.floor(e/3600),Math.floor(e/60)%60);e=Math.floor(e%60);return{mins:(i<10?"0":"")+i,secs:(e<10?"0":"")+e}},fullscreen:function(){this.$refs["player"].mozRequestFullScreen()}},mounted:function(){this.context=this.$refs["board"].getContext("2d"),this.$refs["board"].width=1920,this.$refs["board"].height=1080,this.annotationLogic=new R(this.$refs["board"],this.$refs["recordedAudio"],this.$refs["progress"]),this.annotationLogic.exportVideo=function(t){this.bus.$emit("publish",t)}.bind(this),this.recording=this.annotationLogic.recorder.recording,this.bus.$on("recToggle",()=>{this.initialRecord=!0,this.annotationLogic.recToggle()}),this.bus.$on("micToggle",()=>{this.annotationLogic.micToggle()}),this.bus.$on("toolSelect",t=>{this.annotationLogic.toolSelect(t)}),this.bus.$on("colourPick",t=>{this.annotationLogic.brushColourWithLookup(t)}),this.bus.$on("clearCanvas",()=>{this.annotationLogic.clearCanvas()}),this.bus.$on("brushWidth",t=>{this.annotationLogic.brushWidth(t)}),this.bus.$on("save",(t,e)=>{this.annotationLogic.save(t,e)}),this.bus.$on("load",t=>{this.annotationLogic.load(t)}),this.bus.$on("enablePlayback",()=>{this.initialRecord=!0})}},M=D,A=(i("162a"),Object(o["a"])(M,_,E,!1,null,null,null)),O=A.exports;const j=i("bc3a"),I=new n["a"];var W={name:"home",components:{AnnotationTools:S,AnnotationCanvas:O},data:function(){return{bus:I,recording:!1,micActive:!1,initialRecord:!1,title:"",description:"",published:!1,publishId:""}},methods:{changeColour:function(t){I.$emit("colourPick",t)},toggleRec:function(){I.$emit("recToggle"),this.recording=!this.recording,this.initialRecord=!0},toggleMic:function(){I.$emit("micToggle"),this.micActive=!this.micActive},toolSelect:function(t){I.$emit("toolSelect",t)},clearCanvas:function(){I.$emit("clearCanvas")},brushWidth:function(t){I.$emit("brushWidth",t)},save:function(){I.$emit("save",this.title,this.description)}},mounted:function(){I.$on("publish",function(t){j.post("http://localhost:3000/video",t).then(function(t){t.data.success&&this.$router.push({name:"playback",params:{id:t.data.id}})}.bind(this))}.bind(this))}},B=W,N=(i("c0cc"),Object(o["a"])(B,d,p,!1,null,"54904513",null)),U=N.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"browse"},[i("h1",[t._v("Videos")]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"Search videos"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),t._l(t.videos,function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.filter(e),expression:"filter(video)"}],staticClass:"video"},[i("router-link",{attrs:{to:{name:"playback",params:{id:e.id}}}},[t._v(t._s(e.title))]),i("div",{staticClass:"meta",attrs:{title:"Uploaded "+t.fullHumanDate(e.uploadDate)}},[t._v(t._s(new Date(e.uploadDate).toLocaleDateString("en-US")))])],1)})],2)},J=[];const F=i("bc3a");var G={name:"videos",components:{},data:function(){return{videos:[],searchQuery:""}},methods:{fullHumanDate:function(t){return new Date(t).toLocaleString("en-US")},filter:function(t){return-1!=t.title.indexOf(this.searchQuery)}},mounted:function(){console.log(this.$route.params.id),F.get("http://localhost:3000/listing/").then(function(t){this.videos=t.data}.bind(this))}},Q=G,H=(i("d60a"),Object(o["a"])(Q,V,J,!1,null,null,null)),q=H.exports,z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v(t._s(t.videoData.title))]),i("div",{staticClass:"recordingSection left"},[i("annotation-canvas",{attrs:{bus:t.bus,recording:!1,micActive:!1}})],1),i("div",{staticClass:"description"},[t._v("\n\t\t"+t._s(t.videoData.description)+"\n\t")])])},X=[];const Y=new n["a"],Z=i("bc3a");var K={name:"playback",components:{AnnotationCanvas:O},data:function(){return{bus:Y,videoData:{}}},methods:{},mounted:function(){Z.get(`http://localhost:3000/video/${this.$route.params.id}`).then(function(t){this.videoData=t.data,Y.$emit("load",t.data),Y.$emit("enablePlayback")}.bind(this))}},tt=K,et=(i("33e2"),Object(o["a"])(tt,z,X,!1,null,"08dd7ce1",null)),it=et.exports;n["a"].use(l["a"]);var nt=new l["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:u["default"]},{path:"/rec",name:"recording",component:U},{path:"/play/",name:"videos",component:q},{path:"/play/:id",name:"playback",component:it},{path:"/about",name:"about",component:function(){return i.e("about").then(i.bind(null,"f820"))}}]});n["a"].config.productionTip=!1,new n["a"]({router:nt,render:function(t){return t(h)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("5e27"),s=i.n(n);s.a},"5c57":function(t,e,i){"use strict";var n=i("7ffa"),s=i.n(n);s.a},"5d40":function(t,e,i){},"5e27":function(t,e,i){},"5f24":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"hero"},[n("h1",[t._v("\n\t\t\tCreate annotation videos online \n\t\t")]),n("img",{attrs:{src:i("4a4a"),alt:"",title:"Screenshot of Annotati",width:"700"}}),n("p",{staticClass:"basicInfo"},[t._v("\n\t\t\tUse your stylus to write on top of questions, a blank canvas, or documents.\n\t\t\tWhen you are finished, click publish and share your video link.\n\t\t")]),n("div",[n("h2",[t._v("Sign up for free")]),n("table",[n("tr",[n("td",[n("label",{attrs:{for:"email"}},[t._v("Email:")])]),n("td",[n("input",{attrs:{type:"email",placeholder:"Enter your email address",id:"email"}})])]),n("tr",[n("td",[n("label",{attrs:{for:"password"}},[t._v("Password:")])]),n("td",[n("input",{attrs:{type:"password",placeholder:"Set a password",id:"password"}})])])]),n("br"),n("div",{staticClass:"register button"},[t._v("Sign up")])])])])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},"7ad4":function(t,e,i){"use strict";var n=i("007e"),s=i.n(n);e["default"]=s.a},"7ffa":function(t,e,i){},bb51:function(t,e,i){"use strict";var n=i("5f24"),s=i("7ad4"),r=(i("cccb"),i("2877")),o=Object(r["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=o.exports},c0cc:function(t,e,i){"use strict";var n=i("c581"),s=i.n(n);s.a},c4cc:function(t,e,i){t.exports=i.p+"img/pen.af2e6036.svg"},c581:function(t,e,i){},cccb:function(t,e,i){"use strict";var n=i("d563"),s=i.n(n);s.a},d563:function(t,e,i){},d60a:function(t,e,i){"use strict";var n=i("45f8"),s=i.n(n);s.a},e0ba:function(t,e,i){"use strict";var n=i("1dfb"),s=i.n(n);s.a},f731:function(t,e,i){t.exports=i.p+"img/highlighter.d854581f.svg"}});
//# sourceMappingURL=app.a0e11cc3.js.map